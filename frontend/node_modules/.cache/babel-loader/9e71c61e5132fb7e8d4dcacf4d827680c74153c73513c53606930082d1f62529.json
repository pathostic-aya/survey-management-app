{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hs023\\\\Projects\\\\survey-management-app\\\\frontend\\\\src\\\\components\\\\ProjectManagement\\\\ImportDialog.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ImportDialog = ({\n  isOpen,\n  onClose\n}) => {\n  _s();\n  const [file, setFile] = useState(null);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const queryClient = useQueryClient();\n  const importMutation = useMutation({\n    mutationFn: async importData => {\n      console.log('インポートデータ:', importData);\n      const response = await apiClient.post('/api/projects/import', {\n        projects: importData\n      });\n      return response.data;\n    },\n    onSuccess: data => {\n      queryClient.invalidateQueries({\n        queryKey: ['projects']\n      });\n      alert(`インポートが完了しました: ${data.count}件`);\n      setIsProcessing(false);\n      onClose();\n    },\n    onError: error => {\n      var _error$response, _error$response$data;\n      console.error('Import error:', error);\n      alert(`インポートに失敗しました: ${(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || error.message}`);\n      setIsProcessing(false);\n    }\n  });\n  const handleFileChange = event => {\n    var _event$target$files;\n    const selectedFile = (_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0];\n    if (selectedFile) {\n      setFile(selectedFile);\n    }\n  };\n  const handleImport = () => {\n    if (!file) {\n      alert('ファイルを選択してください');\n      return;\n    }\n\n    // テスト用のサンプルデータでインポート\n    const sampleData = [{\n      進捗状況: '完了',\n      会社名: 'テスト会社1',\n      現場名: 'テスト現場1',\n      機材: '[\"FARO\"]',\n      撮影担当: 'テスト担当者',\n      撮影期間: '2025-01-01 - 2025-01-05',\n      撮影開始日: '2025-01-01',\n      撮影終了日: '2025-01-05',\n      備考: 'インポートテスト',\n      現場住所: '東京都'\n    }];\n    setIsProcessing(true);\n    importMutation.mutate(sampleData);\n  };\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-900 mb-4\",\n          children: \"Excel\\u30C7\\u30FC\\u30BF\\u30A4\\u30F3\\u30DD\\u30FC\\u30C8\\uFF08\\u30C6\\u30B9\\u30C8\\u7248\\uFF09\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Excel\\u30D5\\u30A1\\u30A4\\u30EB\\u3092\\u9078\\u629E\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \".xlsx\",\n              onChange: handleFileChange,\n              className: \"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), file && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-gray-600\",\n            children: [\"\\u9078\\u629E\\u30D5\\u30A1\\u30A4\\u30EB: \", file.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500\",\n            children: \"\\u203B \\u73FE\\u5728\\u306F\\u30C6\\u30B9\\u30C8\\u7528\\u30B5\\u30F3\\u30D7\\u30EB\\u30C7\\u30FC\\u30BF\\u3092\\u30A4\\u30F3\\u30DD\\u30FC\\u30C8\\u3057\\u307E\\u3059\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3 mt-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: onClose,\n            disabled: isProcessing,\n            className: \"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50\",\n            children: \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleImport,\n            disabled: isProcessing,\n            className: \"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50\",\n            children: isProcessing ? '処理中...' : 'テストインポート実行'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n};\n_s(ImportDialog, \"gqmL1octF33EtvIGpBmnYD1S4LY=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = ImportDialog;\nexport default ImportDialog;\nvar _c;\n$RefreshReg$(_c, \"ImportDialog\");","map":{"version":3,"names":["React","useState","useMutation","useQueryClient","apiClient","jsxDEV","_jsxDEV","ImportDialog","isOpen","onClose","_s","file","setFile","isProcessing","setIsProcessing","queryClient","importMutation","mutationFn","importData","console","log","response","post","projects","data","onSuccess","invalidateQueries","queryKey","alert","count","onError","error","_error$response","_error$response$data","message","handleFileChange","event","_event$target$files","selectedFile","target","files","handleImport","sampleData","進捗状況","会社名","現場名","機材","撮影担当","撮影期間","撮影開始日","撮影終了日","備考","現場住所","mutate","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","name","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/hs023/Projects/survey-management-app/frontend/src/components/ProjectManagement/ImportDialog.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient } from '../../services/api';\r\n\r\ninterface ImportDialogProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nconst ImportDialog: React.FC<ImportDialogProps> = ({ isOpen, onClose }) => {\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const queryClient = useQueryClient();\r\n\r\n  const importMutation = useMutation({\r\n    mutationFn: async (importData: any[]) => {\r\n      console.log('インポートデータ:', importData);\r\n      const response = await apiClient.post('/api/projects/import', { projects: importData });\r\n      return response.data;\r\n    },\r\n    onSuccess: (data) => {\r\n      queryClient.invalidateQueries({ queryKey: ['projects'] });\r\n      alert(`インポートが完了しました: ${data.count}件`);\r\n      setIsProcessing(false);\r\n      onClose();\r\n    },\r\n    onError: (error: any) => {\r\n      console.error('Import error:', error);\r\n      alert(`インポートに失敗しました: ${error?.response?.data?.error || error.message}`);\r\n      setIsProcessing(false);\r\n    },\r\n  });\r\n\r\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const selectedFile = event.target.files?.[0];\r\n    if (selectedFile) {\r\n      setFile(selectedFile);\r\n    }\r\n  };\r\n\r\n  const handleImport = () => {\r\n    if (!file) {\r\n      alert('ファイルを選択してください');\r\n      return;\r\n    }\r\n\r\n    // テスト用のサンプルデータでインポート\r\n    const sampleData = [\r\n      {\r\n        進捗状況: '完了',\r\n        会社名: 'テスト会社1',\r\n        現場名: 'テスト現場1',\r\n        機材: '[\"FARO\"]',\r\n        撮影担当: 'テスト担当者',\r\n        撮影期間: '2025-01-01 - 2025-01-05',\r\n        撮影開始日: '2025-01-01',\r\n        撮影終了日: '2025-01-05',\r\n        備考: 'インポートテスト',\r\n        現場住所: '東京都'\r\n      }\r\n    ];\r\n\r\n    setIsProcessing(true);\r\n    importMutation.mutate(sampleData);\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n      <div className=\"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white\">\r\n        <div className=\"mt-3\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">\r\n            Excelデータインポート（テスト版）\r\n          </h3>\r\n          \r\n          <div className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                Excelファイルを選択\r\n              </label>\r\n              <input\r\n                type=\"file\"\r\n                accept=\".xlsx\"\r\n                onChange={handleFileChange}\r\n                className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\r\n              />\r\n            </div>\r\n            \r\n            {file && (\r\n              <div className=\"text-sm text-gray-600\">\r\n                選択ファイル: {file.name}\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"text-xs text-gray-500\">\r\n              ※ 現在はテスト用サンプルデータをインポートします\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-3 mt-6\">\r\n            <button\r\n              onClick={onClose}\r\n              disabled={isProcessing}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50\"\r\n            >\r\n              キャンセル\r\n            </button>\r\n            <button\r\n              onClick={handleImport}\r\n              disabled={isProcessing}\r\n              className=\"px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50\"\r\n            >\r\n              {isProcessing ? '処理中...' : 'テストインポート実行'}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImportDialog;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}